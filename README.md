# lexus_canbus_id



Управление климатом (можно читать и писать):
387#000000000000093F — установить 20 градусов. В седьмом байте температура по формула X = (t*2) — 31
38E#2001000000000002 — установить скорость обдува 1
38E#2001000000000004 — установить скорость обдува 2
38E#2001000000000008 — установить скорость обдува 3
38E#2001000000000010 — установить скорость обдува 4
38E#2001000000000020 — установить скорость обдува 5
38E#2001000000000040 — установить скорость обдува 6
38E#2001000000000080 — установить скорость обдува 7
38E#2001000000100000 — кнопка температуры вниз пассажира
38E#2001000000200000 — кнопка температуры вверх пассажира
38E#2001000000400000 — кнопка температуры вниз водителя
38E#2001000000800000 — кнопка температуры вверх водителя
38E#2001000010000000 — установить режим обдува в лицо
38E#2001000020000000 — установить режим обдува в лицо и ноги
38E#2001000030000000 — установить режим обдува в ноги
38E#2001000040000000 — установить режим обдува в стекло и ноги
38E#2001000100000000 — кнопка уменьшение скорости обдува
38E#2001000200000000 — кнопка увеличения скорости обдува
38E#2001000800000000 — кнопка Mode
38E#2001004000000000 — кнопка подогрева дворников
38E#2001010000000000 — кнопка AC
38E#2001080000000000 — кнопка рециркуляции воздуха
38E#2001100000000000 — кнопка подогрева зеркал и заднего стекла
38E#2001200000000000 — кнопка максимального обдува стекла
38E#2001800000000000 — кнопка Auto

Состояние климата (только читать):
0x381 второй байт 0x01 бит — AC
0x381 второй байт 0x04 бит — Рециркуляция воздуха
0x381 второй байт 0x08 бит — Автоматическая рециркуляция воздуха
0x381 второй байт 0x10 бит — Обогрев заднего стекла и зеркал
0x381 второй байт 0x20 бит — Максимальный обдув лобового стекла
0x381 второй байт 0x80 бит — Auto режим
0x381 третий байт 0x20 бит — Dual режим
0x381 третий байт 0x40 бит — Обогрев дворников
0x381 третий байт 0x07 биты — скорость обдува
0x381 шестой байт 0x01 бит — Нажата кнопка Mode
0x381 четвертый байт 0xF0 биты — Направление обдува (0x10 — в лицо, 0x20 — в ноги и лицо, 0x30 — в ноги, 0x40 — в ноги и секло
0x382 первый байт — Установленная температура слева по формуле — 16+X/2.
0x382 второй байт — Установленная температура справа по формуле — 16+X/2.

Состояние освещения (только читать):
0x622 четвертый байт 0x40 бит — светит дальний
0x622 четвертый байт 0x20 бит — светит ближний
0x622 четвертый байт 0x10 бит — светят габариты
0x622 четвертый байт 0x08 бит — светят передние противотуманки
0x622 четвертый байт 0x04 бит — светят задние противотуманки

Всякие события:
0x621 0x1180000000200000 — нажата кнопка багажника сзади
0x621 0x1180B10000000000 — машина разблокирована сенсором
0x621 0x1180310000000000 — машина заблокирована сенсором
0x621 0x1180A10000000000 — машина разблокирована брелком
0x621 0x1180210000000000 — машина заблокирована брелком
0x621 0x11802F0000000000 — машина сама заблокировалась по таймауту
0x621 0x1180780000000000 — Закрытие центрального замка
0x621 0x1180F80000000000 — Открытие центрального замка
0x621 0x1180000000380000 —

Брелок: (Можно читать и писать)
631#1880130100010000 — Поставить на охрану ручкой двери
631#1880530200010000 — Поставить на охрану
631#1880530400010000 — Снять с охраны
631#1880538000010000 — Багажник
Третий байт бит 0x40 — разворачивать ли зеркала
Четвертый байт — команда (0x01 — закрыть сенсором двери, 0x02 — закрыть брелком, 04 — открыть брелком, 0x3E — закрыть сенсором двери, 0x40 — кнопка замка багажника, 0x80 — кнопка багажника на брелке,
Пятый байт от 0x00 до 0x0f — длительность нажатия.
Шестой байт биты 0x18 — это уникальный номер нажатия (чтобы отличать многократные нажатия)
Шестой байт биты 0x07 — ID ключа

0x635 восьмой байт 0x04 бит — ключ в салоне
0x635 седьмой байт 0x10 бит — ключ обнаружен около двери водителя снаружи
0x635 седьмой байт 0x02 бит — ключ обнаружен около двери пассажира снаружи

OBD запросы (только писать):
XX — количество секунд
750#40043006XX400000 — Сирена сигнализации
750#40043006XX200000 — Звук клаксона
750#40043012XX800000 — Включает салонный свет. Как при открытии двери
750#40043014XX800000 — Звук зуммера
750#40043014XX400000 — Включает аварийку
750#4006301500000000 — Выключить свет включенный через OBD
750#40063015XX200000 — Дальний свет
750#40063015XX400000 — Ближний свет
750#40063015XX800000 — Габариты. И какое-то реле противотуманок
750#40063015XX808000 — Противотуманки перед. Включается только вместе с габаритами
750#40063015XX804000 — Противотуманки зад. Включается только вместе с габаритами
750#4005301100800000 — Закрыть замки дверей
750#4005301100400000 — Открыть замки дверей
750#ad043001XX800000 — Закрыть люк (С люком все не просто. Его крайнее закрытое положение — это приподнятый вверх. Нужно следить за датчиком положения люка)
750#ad043001XX400000 — открыть люк
750#90043001XX400000 — открыть FL окно
750#90043001XX800000 — закрыть FL окно
750#91043001XX400000 — открыть FR окно
750#91043001XX800000 — закрыть FR окно
750#92043001XX400000 — открыть RR окно
750#92043001XX800000 — закрыть RR окно
750#93043001XX400000 — открыть RL окно
750#93043001XX800000 — закрыть RL окно
750#A6043021XX080000 — Свернуть левое зеркало
750#A5043021XX080000 — Свернуть правое зеркало
750#A6043021XX040000 — Развернуть левое зеркало
750#A5043021XX040000 — Развернуть правое зеркало

Состояние дверей (0 — закрыта):
0x620 шестой байт 0x02 бит — багажник
0x620 шестой байт 0x04 бит — задняя левая
0x620 шестой байт 0x08 бит — задняя правая
0x620 шестой байт 0x10 бит — передняя правая
0x620 шестой байт 0x20 бит — передняя левая

0x620 пятый байт 0x40 — Установлен когда не освещение в режиме не "0" и датчик света говорит что должен быть включен свет
0x620 третий и четвертый байты — показания датчика освещения
0x620 восьмой байт бит 0x40 — установлен если не пристёгнут ремень водителя

Зеркала:
0x623 второй байт 0x80 бит — Индикатор что изменилось значениеа22
0x623 третий байт 0x80 бит — "Auto" режим зеркала
0x623 третий байт 0x40 бит — Зеркала свернуты
0x623 третий байт 0x20 бит — Горит клавиша зеркала "R"
0x623 третий байт 0x10 бит — Горит клавиша зеркала "L"

Состояние замков (0 — закрыт):
0x638 третий байт 0x10 бит — Передняя левая
0x638 третий байт 0x08 бит — Передняя правая
0x638 третий байт 0x04 бит — Задняя правая
0x638 третий байт 0x02 бит — Задняя левая
0x638 третий байт 0x01 бит — Багажник?

0x638 пятый байт 0xC0 биты — переднее левое стекло, два бита — 0b10 — полностью поднято, 0b11 — не полностью поднять, 0b01 — полностью опущено
0x638 пятый байт 0x30 биты — переднее правое стекло, два бита — 0b10 — полностью поднято, 0b11 — не полностью поднять, 0b01 — полностью опущено
0x638 пятый байт 0x0С биты — заднее правое стекло, два бита — 0b10 — полностью поднято, 0b11 — не полностью поднять, 0b01 — полностью опущено
0x638 пятый байт 0x03 биты — заднее правое стекло, два бита — 0b10 — полностью поднято, 0b11 — не полностью поднять, 0b01 — полностью опущено

0x639 третий байт 0x00 — когда снята с охраны, 0x04 — первые 30 секунд после посновки на охрану, 0x08 — на охране
0x639 четвертый байт 0x00 -снята с охраны, 0x06 — на охране. 0x10 бит когда орёт сирена. 0x08 бит когда срабатывает объёмный датчик.

0x626 третий и четвертый байт — 0x3030 когда светят подсветка двери в заркалах

0x4A0 первые два байта — Напряжение аккумулятора ($1*256+$2)/32

Обороты:
0x1D0 первые два байта — RPM = ($1*256 + $2) * 0.75

Скорость:
0x610 третий байт — скорость в km/h
0x0B4 пятый и шестой байты — скорость в 0.01 km/h

Пробег:
0x611 6-8 байты в км

Время заведенного двигателя:
0x6B3 7-8 байты — EngineRunningSec = ($7 * 256 + $8) / 10

Температура:
0x3B0 четвертый байт — температура воздуха снаружи по формуле X-48

Коробка:
0x3BC первый байт бит 0x80 — установлен если машина заклушенна
0x3BC второй байт — 0x20 — P, 0x10 — R, 0x08 — N, 0x00 — D, 0x01 — S
0x3BC пятый байт биты 0xF0 — Лимит передачи в режиме S
0x3BC шестой байт бит 0x80 — Установлен если S или D

0x0AA 4 пары байт — скорость каждого из колес по формуле ($1*256+$2) * 0.01 — 67.67

Парктроник:
0x396 второй байт биты 0x70 — левый передний, биты 0x07 — правый передний
0x396 третий байт биты 0x70 — зад центр
0x396 четвертый байт биты 0x70 — зад лево, биты 0x07 — зад право
Значения:
0 — нет
7 — далеко
1 — близко

Остаток топлива:
Не нашел где оно может быть в том что сыпется в шину. Поэтому отснифал запрос из TechStream:
Запрос: 7C0#0221290000000000
Ответ: 7C8#036129XX00000000 — где Остаток в литрах = XX * 0.5

Кнопки руля:
0x61D — второй байт 0x80 — когда что-то меняется
0x61D — третий байт бит 0x01 — Джойстик (enter) вниз, 0x02 — вверх, 0x04 — нажат.
0x61D — четвертый байт бит 0x03 — 0x00 — не в меню, 0x01 — меню (там где afs, пактроник и snow), 0x02 — меню там где настройки.

Реле стартера:
7B4#0530010201010000 — включить. Что значат все аргументы не знаю. Отснифал из TechStream.
7B4#0130000000000000 — выключить

Кнопка start/stop:
Еще не до конца понял как конкретно работает
680#D800040000000000 — Выключает машину если она была заведена с автозапуска.

Состояние переключателя освещения:
Запрос: 750#400221A700000000
Ответ: 758#400561A7XXYYYY00
XX — биты 0x0f — 0x00 — "0", 0x01 — режим габариты, 0x03 — режим ближний свет, 0x04 — auto.
XX — биты 0xf0 — 0x10 — противотуманки, 0x80 — дальний (постоянный), 0xС0 — дальний (flash).
YYYY — уровень датчика освещения.

Педаль тормоза:
0x224 — Первый байт 0x20 — нажата
0x224 — 5 и 6 байты — степень нажатия. Я видел значения от 0 до 0x03FF.

Руль:
0x025 — первые два байта — угол поворота руля. Число со знаком. Ноль — центральное положение.

Педаль газа:
2C6#00000018000000E8 — не нажата
2C6#00000000000000D0 — нажата

